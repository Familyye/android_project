name: Download

on:
  workflow_dispatch:

jobs:
  build:

    runs-on: Ubuntu-22.04

    steps:
    - uses: actions/checkout@v3
    - name: set up JDK 11
      uses: actions/setup-java@v3
      with:
        java-version: '11'
        distribution: 'temurin'
    - name: Delete workflows
      uses: Mattraks/delete-workflow-runs@v2
      with:
        token: ${{ github.token }}
        repository: ${{ github.repository }}
        retain_days: 0 
        #The number of days that is used to compare with the retention days of each workflow.
        keep_minimum_runs: 1 
        #The minimum runs to keep for each workflow.

    - name: Clone project
      run: wget --user-agent="Mozilla/5.0 (Linux; Android 9; Mi Note 3 Build/PKQ1.181007.001; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/102.0.5005.50 Mobile Safari/537.36 Quark/5.6.8.212Mozilla/5.0 (Linux; Android 9; Mi Note 3 Build/PKQ1.181007.001; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/102.0.5005.50 Mobile Safari/537.36 Quark/5.6.8.212" https://mine.bigbigjj.repl.co/d/%E5%A4%B8%E5%85%8B%E7%BD%91%E7%9B%98/%E6%9D%A5%E8%87%AA%EF%BC%9A%E5%88%86%E4%BA%AB/%E7%BA%A2%E7%B1%B3k20proMIUI13-S11.26.zip
    - name: Upload file to file.io
      id: fileio
      run: |
        #curl -sL https://git.io/file-transfer | bash -s beta
        chmod +x ${{ github.workspace }}/transfer
        ${{ github.workspace }}/transfer wet ./*.zip 2>&1 | tee -a ./upload.logs
        #grep --only-matching --perl-regexp "http(s?):\/\/[^ \"\(\)\<\>]*" ./upload.log
        echo "::notice title=Download::$(grep -E -o 'http\S*' ./*.logs)"
